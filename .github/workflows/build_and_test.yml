name: Build And Test
on:
  push:
    branches: [ master, dev ]

jobs:
  build-project:
    name: Build Project with Tests
    runs-on: ubuntu-24.04
    steps:
    - name: Checkout Project
      uses: actions/checkout@v4.1.7
      
    - name: Setup Ninja
      uses: seanmiddleditch/gha-setup-ninja@v5

    - name: Build Project with Tests
      uses: threeal/cmake-action@v2.1.0
      with:
        build-dir: out/build
        generator: Ninja
        cxx-compiler: g++-13
        cxx-flags: -std=c++20
        options: CMAKE_BUILD_TYPE=Release BUILD_TESTS=ON

    - name: Run Tests
      run: cd ./out/build/tests && ./Tests --gtest_filter=-Console*:Editor*:*SavingFile*:*InsertChar*:*InputMode*
